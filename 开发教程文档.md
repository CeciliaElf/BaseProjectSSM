# SSM é€šç”¨åå°ç®¡ç†ç³»ç»Ÿ ğŸš€

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Java](https://img.shields.io/badge/Java-8+-orange.svg)
![Spring](https://img.shields.io/badge/Spring-4.x-green.svg)
![MyBatis](https://img.shields.io/badge/MyBatis-3.x-red.svg)

ä¸€ä¸ªåŸºäº SSM(Spring+SpringMVC+MyBatis) æ¡†æ¶å¼€å‘çš„é€šç”¨åå°ç®¡ç†ç³»ç»Ÿï¼Œæä¾›å®Œæ•´çš„æƒé™ç®¡ç†ã€è§’è‰²åˆ†é…å’Œç³»ç»Ÿç›‘æ§åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ“Š **åŠ¨æ€èœå•** - åŸºäºç”¨æˆ·è§’è‰²è‡ªåŠ¨åŠ è½½å¯¹åº”èœå•
- ğŸ”’ **æƒé™æ§åˆ¶** - ç»†ç²’åº¦çš„åŠŸèƒ½æƒé™æ§åˆ¶
- ğŸ‘¥ **ç”¨æˆ·ç®¡ç†** - æ”¯æŒç”¨æˆ·çš„æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤å’ŒæŸ¥è¯¢
- ğŸ‘‘ **è§’è‰²ç®¡ç†** - è§’è‰²çš„åˆ›å»ºä¸æƒé™åˆ†é…
- ğŸ“ **æ“ä½œæ—¥å¿—** - è®°å½•ç”¨æˆ·å…³é”®æ“ä½œï¼Œä¾¿äºå®¡è®¡å’Œè¿½è¸ª
- ğŸ”¢ **éªŒè¯ç ** - ç™»å½•éªŒè¯ç ï¼Œæé«˜å®‰å…¨æ€§
- ğŸ–¼ï¸ **æ–‡ä»¶ä¸Šä¼ ** - æ”¯æŒå¤´åƒç­‰å›¾ç‰‡çš„ä¸Šä¼ åŠŸèƒ½

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **æ ¸å¿ƒæ¡†æ¶**: Spring 4.x
- **MVC æ¡†æ¶**: Spring MVC
- **ORM æ¡†æ¶**: MyBatis
- **æ•°æ®åº“**: MySQL
- **é¡¹ç›®æ„å»º**: Maven
- **æ—¥å¿—**: Log4j
- **å…¶ä»–**: Jackson, Apache Commons, ç­‰

### å‰ç«¯
- **JS æ¡†æ¶**: jQuery
- **UI åº“**: EasyUI
- **è§†å›¾å¼•æ“**: JSP
- **å…¶ä»–**: HTML, CSS, JavaScript

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
BaseProjectSSM/
â”œâ”€â”€ src/                          # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ com/cecilia/programmer/   # ä¸»åŒ…
â”‚   â”‚   â”œâ”€â”€ controller/           # æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ dao/                  # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ entity/               # å®ä½“ç±»
â”‚   â”‚   â”œâ”€â”€ interceptor/          # æ‹¦æˆªå™¨
â”‚   â”‚   â”œâ”€â”€ service/              # æœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ util/                 # å·¥å…·ç±»
â”‚   â””â”€â”€ config/                   # é…ç½®æ–‡ä»¶
â”œâ”€â”€ WebContent/                   # Webå†…å®¹
â”‚   â”œâ”€â”€ WEB-INF/
â”‚   â”‚   â”œâ”€â”€ views/                # JSPè§†å›¾
â”‚   â”‚   â””â”€â”€ web.xml               # Webé…ç½®
â”‚   â””â”€â”€ resources/                # é™æ€èµ„æº
â”‚       â”œâ”€â”€ admin/                # ç®¡ç†åå°èµ„æº
â”‚       â””â”€â”€ upload/               # ä¸Šä¼ æ–‡ä»¶ç›®å½•
â””â”€â”€ pom.xml                       # Mavené…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- JDK 1.8+
- Maven 3.0+
- MySQL 5.7+
- Tomcat 8.5+

### æ•°æ®åº“é…ç½®
1. åˆ›å»ºæ•°æ®åº“`baseprojectssm`
2. å¯¼å…¥ SQL è„šæœ¬ (`doc/baseprojectssm.sql`)

### ä¿®æ”¹é…ç½®
1. ç¼–è¾‘`src/config/db.properties`æ–‡ä»¶ï¼Œè®¾ç½®æ•°æ®åº“è¿æ¥å‚æ•°

```properties
jdbc.driver=com.mysql.cj.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/baseprojectssm?useUnicode=true&characterEncoding=utf8&serverTimezone=GMT%2B8
jdbc.username=root
jdbc.password=ä½ çš„å¯†ç 
```

### éƒ¨ç½²è¿è¡Œ
1. ä½¿ç”¨ Maven ç¼–è¯‘é¡¹ç›®
```bash
mvn clean package
```

2. å°†ç”Ÿæˆçš„ WAR åŒ…éƒ¨ç½²åˆ° Tomcat

3. è®¿é—® `http://localhost:8080/BaseProjectSSM`

4. é»˜è®¤ç®¡ç†å‘˜è´¦å·
```
ç”¨æˆ·å: admin
å¯†ç : admin
```

## ğŸ“¸ ç³»ç»Ÿæˆªå›¾

![ç™»å½•é¡µé¢](docs/images/login.png)
![ç³»ç»Ÿé¦–é¡µ](docs/images/dashboard.png)
![ç”¨æˆ·ç®¡ç†](docs/images/user-management.png)

## ğŸ“„ è®¸å¯è¯

[MIT](LICENSE) Â© Cecilia

## ğŸ“Š ç³»ç»ŸåŠŸèƒ½æ¨¡å—

### ç³»ç»Ÿç®¡ç†
- ç”¨æˆ·ç®¡ç†
- è§’è‰²ç®¡ç†
- èœå•ç®¡ç†
- æ—¥å¿—ç®¡ç†

### ä¸ªäººä¿¡æ¯
- ä¿®æ”¹å¯†ç 
- ä¸ªäººèµ„æ–™

## ğŸ”— ç›¸å…³é“¾æ¥
- [è¯¦ç»†å¼€å‘æ–‡æ¡£](å¼€å‘æ•™ç¨‹æ–‡æ¡£.md)
- [Spring å®˜æ–¹æ–‡æ¡£](https://spring.io/projects/spring-framework)
- [MyBatis å®˜æ–¹æ–‡æ¡£](https://mybatis.org/mybatis-3/)

## â“ å¸¸è§é—®é¢˜

**Q: å¦‚ä½•ä¿®æ”¹æ—¥å¿—å­˜å‚¨ä½ç½®ï¼Ÿ**
A: ç¼–è¾‘`src/config/log4j.properties`ï¼Œä¿®æ”¹`log4j.appender.file.File`å±æ€§ã€‚

**Q: å¦‚ä½•æ‰©å±•æ–°çš„åŠŸèƒ½æ¨¡å—ï¼Ÿ**
A: æ·»åŠ æ–°çš„å®ä½“ç±»ã€DAOã€Service å’Œ Controllerï¼Œç„¶ååœ¨èœå•ç®¡ç†ä¸­æ·»åŠ å¯¹åº”çš„èœå•é¡¹ã€‚

---
```

## æ•°æ®åº“è®¾è®¡
æ•°æ®åº“è®¾è®¡éµå¾ªç¬¬ä¸‰èŒƒå¼ï¼Œä¿è¯äº†æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚

### ä¸»è¦è¡¨ç»“æ„

#### 1. userè¡¨ (ç”¨æˆ·è¡¨)
| å­—æ®µå     | ç±»å‹         | è¯´æ˜         | çº¦æŸ                 |
|------------|--------------|--------------|----------------------|
| id         | bigint       | ä¸»é”®ID       | PRIMARY KEY, AUTO_INCREMENT |
| username   | varchar(32)  | ç”¨æˆ·å       | UNIQUE, NOT NULL     |
| password   | varchar(32)  | å¯†ç          | NOT NULL             |
| roleId     | bigint       | è§’è‰²ID       | FOREIGN KEY          |
| photo      | varchar(128) | å¤´åƒè·¯å¾„     |                      |
| sex        | int          | æ€§åˆ«         |                      |
| status     | int          | çŠ¶æ€         |                      |

#### 2. roleè¡¨ (è§’è‰²è¡¨)
| å­—æ®µå     | ç±»å‹         | è¯´æ˜         | çº¦æŸ                 |
|------------|--------------|--------------|----------------------|
| id         | bigint       | ä¸»é”®ID       | PRIMARY KEY, AUTO_INCREMENT |
| name       | varchar(32)  | è§’è‰²åç§°     | UNIQUE, NOT NULL     |
| remark     | varchar(128) | è§’è‰²å¤‡æ³¨     |                      |

#### 3. menuè¡¨ (èœå•è¡¨)
| å­—æ®µå     | ç±»å‹         | è¯´æ˜         | çº¦æŸ                 |
|------------|--------------|--------------|----------------------|
| id         | bigint       | ä¸»é”®ID       | PRIMARY KEY, AUTO_INCREMENT |
| parentId   | bigint       | çˆ¶èœå•ID     |                      |
| name       | varchar(32)  | èœå•åç§°     | NOT NULL             |
| url        | varchar(128) | èœå•URL      |                      |
| icon       | varchar(32)  | èœå•å›¾æ ‡     |                      |

#### 4. authorityè¡¨ (æƒé™è¡¨)
| å­—æ®µå     | ç±»å‹         | è¯´æ˜         | çº¦æŸ                 |
|------------|--------------|--------------|----------------------|
| id         | bigint       | ä¸»é”®ID       | PRIMARY KEY, AUTO_INCREMENT |
| roleId     | bigint       | è§’è‰²ID       | FOREIGN KEY          |
| menuId     | bigint       | èœå•ID       | FOREIGN KEY          |

#### 5. logè¡¨ (æ—¥å¿—è¡¨)
| å­—æ®µå     | ç±»å‹         | è¯´æ˜         | çº¦æŸ                 |
|------------|--------------|--------------|----------------------|
| id         | bigint       | ä¸»é”®ID       | PRIMARY KEY, AUTO_INCREMENT |
| content    | varchar(255) | æ—¥å¿—å†…å®¹     | NOT NULL             |
| createTime | datetime     | åˆ›å»ºæ—¶é—´     | NOT NULL             |

### è¡¨å…³ç³»
- userè¡¨çš„roleIdå…³è”roleè¡¨çš„id(å¤šå¯¹ä¸€)
- authorityè¡¨çš„roleIdå…³è”roleè¡¨çš„id(å¤šå¯¹ä¸€)
- authorityè¡¨çš„menuIdå…³è”menuè¡¨çš„id(å¤šå¯¹ä¸€)
- menuè¡¨çš„parentIdå…³è”menuè¡¨çš„id(è‡ªå…³è”)

## æ ¸å¿ƒåŠŸèƒ½å®ç°

### 1. ç™»å½•è®¤è¯
ä½¿ç”¨æ‹¦æˆªå™¨å®ç°ç™»å½•è®¤è¯ï¼Œæœªç™»å½•ç”¨æˆ·å°†è¢«é‡å®šå‘åˆ°ç™»å½•é¡µé¢ã€‚
```java
public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object arg2) throws Exception {
    Object admin = request.getSession().getAttribute("admin");
    if (admin == null) {
        response.sendRedirect(request.getServletContext().getContextPath() + "/system/login");
        return false;
    }
    return true;
}
```

### 2. èœå•åŠ è½½ä¸æƒé™æ§åˆ¶
æ ¹æ®ç”¨æˆ·è§’è‰²åŠ è½½å¯¹åº”çš„èœå•é¡¹ï¼Œå®ç°åŠ¨æ€èœå•å’Œæƒé™æ§åˆ¶ã€‚
```java
// åœ¨ç™»å½•æ—¶åŠ è½½ç”¨æˆ·èœå•
Role role = roleService.find(findByUsername.getRoleId());
List<Authority> authorityList = authorityService.findListByRoleId(role.getId());
String menuIds = "";
for (Authority authority: authorityList) {
    menuIds += authority.getMenuId() + ",";
}
if (!StringUtils.isEmpty(menuIds)) {
    menuIds = menuIds.substring(0, menuIds.length() - 1);
}
List<Menu> userMenus = menuService.findListByIds(menuIds);
```

### 3. æ–‡ä»¶ä¸Šä¼ 
å®ç°äº†æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œæ”¯æŒå›¾ç‰‡ä¸Šä¼ å¹¶è¿›è¡Œæ ¼å¼éªŒè¯ã€‚
```java
@RequestMapping(value = "/upload_photo", method = RequestMethod.POST)
@ResponseBody
public Map<String, String> uploadPhoto(MultipartFile photo, HttpServletRequest request) {
    // æ–‡ä»¶ä¸Šä¼ é€»è¾‘
}
```

### 4. éªŒè¯ç ç”Ÿæˆ
ä½¿ç”¨CpachaUtilå·¥å…·ç±»ç”ŸæˆéªŒè¯ç ï¼Œæé«˜ç™»å½•å®‰å…¨æ€§ã€‚
```java
@RequestMapping(value = "/get_cpacha", method = RequestMethod.GET)
public void generateCpacha(...) {
    CpachaUtil cpachaUtil = new CpachaUtil(vcodeLen, width, height);
    String generatorVCode = cpachaUtil.generatorVCode();
    request.getSession().setAttribute(cpachaType, generatorVCode);
    BufferedImage generatorRotateVCodeImage = cpachaUtil.generatorRotateVCodeImage(generatorVCode, true);
    ImageIO.write(generatorRotateVCodeImage, "gif", response.getOutputStream());
}
```

## å‰åç«¯åˆ†ç¦»æ”¹é€ æŒ‡å—

å¦‚æœæ‚¨å¸Œæœ›å°†æ­¤é¡¹ç›®æ”¹é€ ä¸ºå‰åç«¯åˆ†ç¦»æ¶æ„(ä½¿ç”¨Spring Boot + Vue3)ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹æ­¥éª¤ï¼š

### 1. åç«¯æ”¹é€ (Spring Boot)
1. **åˆ›å»ºSpring Booté¡¹ç›®**
   - ä½¿ç”¨Spring Initializeråˆ›å»ºé¡¹ç›®
   - æ·»åŠ ä¾èµ–: Spring Web, MyBatis, MySQL Driver, Spring Securityç­‰

2. **è¿ç§»å®ä½“ç±»å’ŒDAOå±‚**
   - ç›´æ¥è¿ç§»ç°æœ‰entityå’Œmapper
   - ä¿®æ”¹MyBatisæ³¨è§£ï¼Œä½¿ç”¨Spring Booté£æ ¼é…ç½®

3. **æ”¹é€ æ§åˆ¶å™¨**
   - ä½¿ç”¨@RestControlleræ›¿ä»£@Controller + @ResponseBody
   - ä½¿ç”¨Spring Securityæ›¿ä»£è‡ªå®šä¹‰æ‹¦æˆªå™¨
   - å®ç°JWTè®¤è¯æœºåˆ¶

4. **è·¨åŸŸé…ç½®**
```java
@Configuration
public class CorsConfig {
    @Bean
    public CorsFilter corsFilter() {
        CorsConfiguration config = new CorsConfiguration();
        config.addAllowedOrigin("*");
        config.setAllowCredentials(true);
        config.addAllowedMethod("*");
        config.addAllowedHeader("*");
        
        UrlBasedCorsConfigurationSource configSource = new UrlBasedCorsConfigurationSource();
        configSource.registerCorsConfiguration("/**", config);
        
        return new CorsFilter(configSource);
    }
}
```

### 2. å‰ç«¯æ”¹é€ (Vue3)
1. **åˆå§‹åŒ–Vue3é¡¹ç›®**
```bash
npm init vue@latest
```

2. **å®‰è£…å¿…è¦ä¾èµ–**
```bash
npm install axios vuex@next vue-router@next element-plus
```

3. **å®ç°ç™»å½•é¡µé¢ä¸è®¤è¯**
```javascript
// ä½¿ç”¨ axios å¤„ç†è¯·æ±‚
import axios from 'axios';

// åˆ›å»º axios å®ä¾‹
const service = axios.create({
  baseURL: 'http://localhost:8080', // API åŸºç¡€è·¯å¾„
  timeout: 5000 // è¯·æ±‚è¶…æ—¶
});

// è¯·æ±‚æ‹¦æˆªå™¨ï¼Œæ·»åŠ  token
service.interceptors.request.use(
  config => {
    const token = localStorage.getItem('token');
    if (token) {
      config.headers['Authorization'] = 'Bearer ' + token;
    }
    return config;
  },
  error => {
    return Promise.reject(error);
  }
);

// å“åº”æ‹¦æˆªå™¨ï¼Œå¤„ç†é”™è¯¯
service.interceptors.response.use(
  response => response.data,
  error => {
    if (error.response.status === 401) {
      // æœªè®¤è¯ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
      router.push('/login');
    }
    return Promise.reject(error);
  }
);
```

4. **å®ç°è·¯ç”±ä¸èœå•**
- ä½¿ç”¨ Vue Router ç®¡ç†è·¯ç”±
- å®ç°åŠ¨æ€è·¯ç”±å’Œæƒé™æ§åˆ¶
- ä½¿ç”¨ ElementPlus ç»„ä»¶åº“é‡æ„ç•Œé¢

5. **çŠ¶æ€ç®¡ç†**
- ä½¿ç”¨ Vuex æˆ– Pinia ç®¡ç†å…¨å±€çŠ¶æ€
- å¤„ç†ç”¨æˆ·ä¿¡æ¯ã€æƒé™ç­‰æ•°æ®

### 3. æ¥å£å®šä¹‰
åœ¨å®ç°å‰åç«¯åˆ†ç¦»æ¶æ„æ—¶ï¼Œéœ€è¦é‡æ–°è®¾è®¡ APIï¼Œå»ºè®®é‡‡ç”¨ RESTful é£æ ¼ï¼š

| æ–¹æ³•   | è·¯å¾„                  | è¯´æ˜              |
|--------|----------------------|-------------------|
| POST   | /api/auth/login      | ç”¨æˆ·ç™»å½•          |
| GET    | /api/users           | è·å–ç”¨æˆ·åˆ—è¡¨      |
| POST   | /api/users           | åˆ›å»ºæ–°ç”¨æˆ·        |
| PUT    | /api/users/{id}      | æ›´æ–°ç”¨æˆ·ä¿¡æ¯      |
| DELETE | /api/users/{id}      | åˆ é™¤ç”¨æˆ·          |
| GET    | /api/menus           | è·å–èœå•åˆ—è¡¨      |
| GET    | /api/roles           | è·å–è§’è‰²åˆ—è¡¨      |

é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œå¯ä»¥å°†ä¼ ç»Ÿçš„ SSM+JSP é¡¹ç›®æ”¹é€ ä¸ºç°ä»£åŒ–çš„å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæé«˜å¼€å‘æ•ˆç‡å’Œç”¨æˆ·ä½“éªŒã€‚ 